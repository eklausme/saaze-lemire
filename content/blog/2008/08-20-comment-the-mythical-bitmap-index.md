---
date: "2008-08-20 12:00:00"
title: "The mythical bitmap index"
index: false
---

[31 thoughts on &ldquo;The mythical bitmap index&rdquo;](/lemire/blog/2008/08-20-the-mythical-bitmap-index)

<ol class="comment-list">
<li id="comment-50101" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-20T11:33:01+00:00">August 20, 2008 at 11:33 am</time></a> </div>
<div class="comment-content">
<p>Thank you Daniel. This is more than I wished for.</p>
</div>
</li>
<li id="comment-50099" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/e9a1ce0b75918ac8c05ae1e83ebeab69?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/e9a1ce0b75918ac8c05ae1e83ebeab69?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" decoding="async" /> <b class="fn"><a href="https://thenoisychannel.blogspot.com/" class="url" rel="ugc external nofollow">Daniel Tunkelang</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-20T10:25:09+00:00">August 20, 2008 at 10:25 am</time></a> </div>
<div class="comment-content">
<p>Daniel, I&rsquo;m glad your pushing this. If you check out the talk page for the entry (<a href="https://en.wikipedia.org/wiki/Talk:Bitmap_index" rel="nofollow ugc">http://en.wikipedia.org/wiki/Talk:Bitmap_index</a>), you&rsquo;ll see that a couple of us are supporting your efforts.</p>
<p>Fixing Wikipedia is a thankless but worthwhile task, and I&rsquo;m glad to see researcher-bloggers taking it on. I&rsquo;ve had a few success stories myself:</p>
<p><a href="https://thenoisychannel.blogspot.com/2008/06/your-input-really-is-relevant.html" rel="nofollow ugc">http://thenoisychannel.blogspot.com/2008/06/your-input-really-is-relevant.html</a></p>
<p><a href="https://thenoisychannel.blogspot.com/2008/06/exploratory-search-is-relevant-too.html" rel="nofollow ugc">http://thenoisychannel.blogspot.com/2008/06/exploratory-search-is-relevant-too.html</a></p>
</div>
</li>
<li id="comment-50100" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/e9a1ce0b75918ac8c05ae1e83ebeab69?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/e9a1ce0b75918ac8c05ae1e83ebeab69?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://thenoisychannel.blogspot.com/" class="url" rel="ugc external nofollow">Daniel Tunkelang</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-20T10:28:01+00:00">August 20, 2008 at 10:28 am</time></a> </div>
<div class="comment-content">
<p>Ouch, make that &ldquo;you&rsquo;re&rdquo;. Next time I&rsquo;ll proofread before getting caught up in the Roman numeral arithmetic.</p>
<p>And the talk page for the Wikipedia entry didn&rsquo;t get turned into a hot link, so I&rsquo;ll try again:</p>
<p><a href="https://en.wikipedia.org/wiki/Talk:Bitmap_index" rel="nofollow ugc">http://en.wikipedia.org/wiki/Talk:Bitmap_index</a></p>
</div>
</li>
<li id="comment-50102" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/8d98221c72ad0dc0e7b24480161e13cc?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/8d98221c72ad0dc0e7b24480161e13cc?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.ragibhasan.com" class="url" rel="ugc external nofollow">Ragib Hasan</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-20T12:04:45+00:00">August 20, 2008 at 12:04 pm</time></a> </div>
<div class="comment-content">
<p>Hi Daniel, I am not sure why your edit got reverted (can&rsquo;t find the diff at a glance), but Wikipedia is pretty much open to referenced information. So, if almost any info is properly referenced from several reliable sources, it gets to stay.</p>
<p>I have added the info and reference to the Sharma benchmark article, and feel free to provide further links/refs about this in the article talk page.</p>
</div>
</li>
<li id="comment-50103" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-20T17:05:13+00:00">August 20, 2008 at 5:05 pm</time></a> </div>
<div class="comment-content">
<p>Thank you. I saw that earlier today.</p>
</div>
</li>
<li id="comment-50104" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/dd6a6e51727ab2ebe5e5f0acd360f667?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/dd6a6e51727ab2ebe5e5f0acd360f667?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Chris Dew</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-21T04:48:41+00:00">August 21, 2008 at 4:48 am</time></a> </div>
<div class="comment-content">
<p>If all the values of a field (indexed with a bitmap field) were unique would the bitmap indices be extremely short? Would there need to be a tree-structure to store the indicies (or their locations)? How is the correct bitmap index, for a field, found when there are large numbers of distinct values?</p>
</div>
</li>
<li id="comment-50105" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/8b70790f2d886a2568bf35f10a3af9b1?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/8b70790f2d886a2568bf35f10a3af9b1?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.entish.org/willwhim/" class="url" rel="ugc external nofollow">Will</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-21T07:28:45+00:00">August 21, 2008 at 7:28 am</time></a> </div>
<div class="comment-content">
<p>Daniel, </p>
<p>I&rsquo;m installing the software today, and don&rsquo;t have the GNU seq command installed; so the /testequalityqueries.sh failed.</p>
<p>Let me suggest you replace `seq 0 10` with<br/>
0 1 2 3 4 5 6 7 8 9 10 in the two places seq is called in the script. This was then successful.</p>
</div>
</li>
<li id="comment-50106" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-21T07:46:36+00:00">August 21, 2008 at 7:46 am</time></a> </div>
<div class="comment-content">
<p>Thank you Will.</p>
</div>
</li>
<li id="comment-50107" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6518c23aacab4c42dd2c5b9b57b79fb5?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-21T07:48:42+00:00">August 21, 2008 at 7:48 am</time></a> </div>
<div class="comment-content">
<p><i> If all the values of a field (indexed with a bitmap field) were unique would the bitmap indices be extremely short? Would there need to be a tree-structure to store the indicies (or their locations)? How is the correct bitmap index, for a field, found when there are large numbers of distinct values?</i></p>
<p>As I point out in my post, you typically use a b-tree to get the location of the bitmap. You need some sort of b-tree-like data structure because compressed bitmaps have different sizes so you can&rsquo;t just have them in a fix-length-record flat file.</p>
<p>It is not very exciting to index a field where all values are distinct because, yes, the bitmaps would all be very short. Ah! But you rarely have a single dimension. Bitmap indexes are typically used in a DSS context where you &ldquo;always&rdquo; have numerous dimensions.</p>
</div>
</li>
<li id="comment-50108" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/297c7465635702781c5fde40de61c026?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/297c7465635702781c5fde40de61c026?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">John Haugeland</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-21T09:31:53+00:00">August 21, 2008 at 9:31 am</time></a> </div>
<div class="comment-content">
<p>Jesus, you&rsquo;re surprised that Wikipedia is handing out bad technical advice? Have you noticed who writes it yet?</p>
<p><a href="http://sc.tri-bit.com/outgoing/NeverTrustWikipediaTechnicalArticles.png" rel="nofollow ugc">http://sc.tri-bit.com/outgoing/NeverTrustWikipediaTechnicalArticles.png</a></p>
<p>Also, your anti-spam mechanism is inappropriately case sensitive.</p>
</div>
</li>
<li id="comment-50121" class="comment even thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ab82fd8b5ffe4d09c2bb5f9c14d34b09?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ab82fd8b5ffe4d09c2bb5f9c14d34b09?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Parand</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2008-08-25T11:56:26+00:00">August 25, 2008 at 11:56 am</time></a> </div>
<div class="comment-content">
<p>Thanks Daniel, I learned something today.</p>
</div>
</li>
<li id="comment-50528" class="comment odd alt thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a0c394e31c9740376635c8878cf5889e?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a0c394e31c9740376635c8878cf5889e?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://sematext.com/" class="url" rel="ugc external nofollow">Otis Gospodnetic</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-01-10T00:53:58+00:00">January 10, 2009 at 12:53 am</time></a> </div>
<div class="comment-content">
<p>I&rsquo;m no expert, but it seems people who authored <a href="http://i.cs.hku.hk/~ssdbm/slides/SSDBM.July11/Session7.2.pdf" rel="nofollow ugc">http://i.cs.hku.hk/~ssdbm/slides/SSDBM.July11/Session7.2.pdf</a> are, and I think they claim the opposite.</p>
</div>
</li>
<li id="comment-50529" class="comment byuser comment-author-lemire bypostauthor even thread-even depth-1 parent">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-01-10T10:36:32+00:00">January 10, 2009 at 10:36 am</time></a> </div>
<div class="comment-content">
<p>@Otis: Wu is an expert indeed. Please see his 2006 paper &ldquo;Optimizing bitmap indices with efficient compression&rdquo;</p>
<p>I quote their abstract:</p>
<p>&rdquo; In this paper, we present a new compression scheme called Word-Aligned Hybrid (WAH) code that makes com-<br/>
pressed bitmap indices efficient even for high cardinality attributes. &rdquo;</p>
<p>(WAH is based on BBC which is used by Oracle.)</p>
</div>
<ol class="children">
<li id="comment-288413" class="comment odd alt depth-2">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/41474bbbc39e61eb6712d5f4db89b973?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/41474bbbc39e61eb6712d5f4db89b973?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Anifat</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2017-10-08T15:41:56+00:00">October 8, 2017 at 3:41 pm</time></a> </div>
<div class="comment-content">
<p>Though I am a student; I can confirm that I have tested this assumption in Oracle 11g. Bitmap index is efficient for high cardinality and very fast for evaluating aggregate queries.</p>
</div>
</li>
</ol>
</li>
<li id="comment-50769" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">zhuo wang</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-09T01:07:52+00:00">March 9, 2009 at 1:07 am</time></a> </div>
<div class="comment-content">
<p>Can we say that WAH is the best of all kinds of bitmap indices? How does chan&rsquo;s multi-component interval encoding method work compared to WAH?<br/>
Will WAH be the overall winner? According to Wu&rsquo;s paper, the WAH compression works well for sparse bitmaps,i.e.,the large cardinality, and skewed data. Maybe some other schemes will beat WAH in lower cardinality.</p>
</div>
</li>
<li id="comment-50771" class="comment byuser comment-author-lemire bypostauthor odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-09T13:03:11+00:00">March 9, 2009 at 1:03 pm</time></a> </div>
<div class="comment-content">
<p>The general idea behind WAH is sound and that&rsquo;s what people should be using. Not necessarily WAH itself, but some variant. For example, we decided to use EWAH. (Note that WAH itself is patented.)</p>
<p>Chan&rsquo;s interval encoding is a bit of a problem because it will generate an incompressible index. If you have L different attribute values in your column, and n rows, you will end up with nL bits that are incompressible. This can be quite a pain. It will be slow to index, it will use a lot of storage, it will be hard to keep things in memory, and so on.</p>
<p>I would not recommend interval coding. Rather, look at hierarchical coding with maybe 2-3 levels.</p>
</div>
</li>
<li id="comment-50772" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">zhuo wang</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-09T20:01:43+00:00">March 9, 2009 at 8:01 pm</time></a> </div>
<div class="comment-content">
<p>where can I find the description of EWAH? What is hierarchical coding? where can I find it?</p>
<p>Yes, results of interval encoding and such like will be hard to compress further, but they are not supposed to do that. The n*L bits with L distinct values and n rows are not interval encoding, they are just simple(basic) bitmap index. For interval encoding, with m components, let m = log_b_(L),it will produce m*(b/2)*n bits, far less than n*L bits.</p>
</div>
</li>
<li id="comment-50774" class="comment odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/4b736113aa1557b9a110b5123d81d5f6?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/4b736113aa1557b9a110b5123d81d5f6?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-10T09:15:53+00:00">March 10, 2009 at 9:15 am</time></a> </div>
<div class="comment-content">
<p><i> where can I find the description of EWAH?</i></p>
<p>EWAH is not an important contribution, nevertheless&#8230; see this paper:</p>
<p><a href="http://arxiv.org/abs/0901.3751" rel="nofollow">Sorting improves word-aligned bitmap indexes</a></p>
<p>See also my slides:</p>
<p><a href="http://www.slideshare.net/lemire/all-about-bitmap-indexes-and-sorting-them" rel="nofollow ugc">http://www.slideshare.net/lemire/all-about-bitmap-indexes-and-sorting-them</a></p>
<p><i> What is hierarchical coding? where can I find it?</i></p>
<p> R. R. Sinha, M. Winslett, Multi-resolution bitmap indexes for scientific<br/>
data, ACM Trans. Database Syst. 32 (3) (2007)</p>
<p><i> Yes, results of interval encoding and such like will be hard to compress further, but they are not supposed to do that. The n*L bits with L distinct values and n rows are not interval encoding, they are just simple(basic) bitmap index. For interval encoding, with m components, let m = log_b_(L),it will produce m*(b/2)*n bits, far less than n*L bits.</i></p>
<p>With RLE-based compression (including BBC, WAH, EWAH), compression accelerates query as well as reducing storage. The total storage will be O(n) with a small constant.</p>
<p>Note that Chan and Ionnadis did not invent multicomponent indexing. It goes back to the seventies. What they stated is that if you don&rsquo;t compress your bitmaps using RLE compression, then one level of multicomponent indexing was ideal. The problem with this analysis is that there is no reason not to compress the bitmap indexes with RLE.</p>
<p>Then, they invented interval coding. The problem is that interval coding precludes compression!</p>
<p>Yes, you can use multicomponents indexes&#8230; but you can use multicomponents with anything, not just interval coding. Is your factor m*b/2 small? It is actually m L^(1/m)/2. It is pretty hard to make it into a small constant.</p>
<p>Think about the fact that if the index is ten times the size of the original table, this may be prohibitive. Indexes are not supposed to be much larger than the original data set&#8230; Very large indexes tend to be slow in practice due to buffering problems.</p>
<p>But read what Sinha and Winslett have written on this topic. Wu has also written on why interval coding is not a good idea.</p>
</div>
</li>
<li id="comment-50778" class="comment byuser comment-author-lemire bypostauthor even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-10T21:45:46+00:00">March 10, 2009 at 9:45 pm</time></a> </div>
<div class="comment-content">
<p><i> According to Wu&rsquo;s paper, the WAH space complexity is 2N words for most datasets, 4N for the worst case. Note it is 2N words,that is 64N bits. My m*b/2*n is in bits!m and b are both very small, isn&rsquo;t it? I can&rsquo;t image m L^(m/2)/2, since L can be a very big number. Chan would not be so foolish to present such a solution. 🙂</i></p>
<p>Chan is far from foolish. That is not my point. Interval coding is a nice idea, but it fails for non-trivial reasons. You only realize it is a bad idea after playing with real-world implementations of the idea.</p>
<p>The formula is something like m L^(1/m)/2 and not m L^(m/2)/2. To make L^(m/2)/2 into a small constant, you need for m to be rather large (say m=5). </p>
<p>Eventually, you will make interval coding to be just as small as a regular BBC, WAH or EWAH bitmap index, but what will happen of your query performance? Remember that every time you use the multicomponent trick, your performance degrades&#8230; and it does so faster than you might think! To see why, try to implement it! You will see that it gets nasty, and you end up having rather complicated boolean functions.</p>
<p>So you will need to load many incompressible bitmaps. Hence, for any range query, the amount of data you will load is in Omega(n) because your bitmaps are incompressible. The only way this is ok is if your selectivity is always very low. But then, at that point, why not use a Bit-Sliced or projection indexes?</p>
<p>There is absolutely no way you can get good practical performance, and nice fundamental properties, with incompressible bitmaps. Multicomponent is not a good substitute to compression because it trades off space for speed. You want to get better speed and less storage, both together! RLE compression does exactly this!</p>
<p><i> BTW, how do you comment on Hakan&rsquo;s Approximate bitmap index? I have developed this scheme into an 100% accurate one with 0 false positives.<br/>
Do you think this is promising?</i></p>
<p>Hard to tell. Send me a draft and I&rsquo;ll give you an opinion. But a good sanity test is to implement your scheme and see how fast it is!</p>
<p>I&rsquo;m guessing you have a scheme that allows random access? Is it random access in constant time? Then what is the constant?</p>
</div>
</li>
<li id="comment-50777" class="comment odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">zhuo wang</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-10T18:23:28+00:00">March 10, 2009 at 6:23 pm</time></a> </div>
<div class="comment-content">
<p>Thank you for your links to those matierals&#8230;</p>
<p>According to Wu&rsquo;s paper, the WAH space complexity is 2N words for most datasets, 4N for the worst case. Note it is 2N words,that is 64N bits. My m*b/2*n is in bits!m and b are both very small, isn&rsquo;t it? I can&rsquo;t image m L^(m/2)/2, since L can be a very big number. Chan would not be so foolish to present such a solution. 🙂</p>
<p>BTW, how do you comment on Hakan&rsquo;s Approximate bitmap index? I have developed this scheme into an 100% accurate one with 0 false positives.<br/>
Do you think this is promising?</p>
</div>
</li>
<li id="comment-50782" class="comment byuser comment-author-lemire bypostauthor even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-11T08:24:50+00:00">March 11, 2009 at 8:24 am</time></a> </div>
<div class="comment-content">
<p><i> I didn&rsquo;t mean interval encoding outperforms WAH, I agree that WAH or EWAH could be the best scheme for bitmap indexes. I have read Wu&rsquo;s ACM paper(38 pages) and it really makes sense.</i></p>
<p>If you have a high selectivity query, your effort should be small. But with interval coding, your effort is always proportional to the number of rows in the entire table. That is not good for high selectivity queries. And interval coding does not even fare all that well for low selectivity queries where I prefer projection and bit-sliced indexes. For one thing, it is far simpler to implement a projection index to interval coding!</p>
<p><i> As for approximate bitmap(AB) index, I implemented it and improved it into a accurate scheme with a small space and time overhead. But experiments show that the AB scheme is hard to be pratical for it only suits for small query region(narrow row and col selectivity). This technique essentially doesn&rsquo;t work for bitmap index. The problem is the heavy iterative cost for making (row+col) keys for hashing, which is far more time consuming compared to CPU bitwise operations as WAH exploits.</i></p>
<p>It is unfortunately easy to underestimate the CPU bottleneck when working on paper. Researchers often write that since we have 4 cores or more per CPU, CPU cycles are cheap. But that is not so simple, is it?</p>
</div>
</li>
<li id="comment-50779" class="comment odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ac9677b448aacb98e4b877919629da3?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">zhuo wang</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2009-03-11T04:54:50+00:00">March 11, 2009 at 4:54 am</time></a> </div>
<div class="comment-content">
<p>Thanksï¼Œdaniel. 🙂<br/>
I didn&rsquo;t mean interval encoding outperforms WAH, I agree that WAH or EWAH could be the best scheme for bitmap indexes. I have read Wu&rsquo;s ACM paper(38 pages) and it really makes sense.</p>
<p>As for approximate bitmap(AB) index, I implemented it and improved it into a accurate scheme with a small space and time overhead. But experiments show that the AB scheme is hard to be pratical for it only suits for small query region(narrow row and col selectivity). This technique essentially doesn&rsquo;t work for bitmap index. The problem is the heavy iterative cost for making (row+col) keys for hashing, which is far more time consuming compared to CPU bitwise operations as WAH exploits.</p>
</div>
</li>
<li id="comment-54210" class="comment byuser comment-author-lemire bypostauthor even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/blog/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2011-02-11T16:11:03+00:00">February 11, 2011 at 4:11 pm</time></a> </div>
<div class="comment-content">
<p>@Lyle</p>
<p>For an uncompressed bitmap, you are correct. But if each bitmap is compressed, the bitmap index will use O(n * log(n)) space.</p>
<p>Daniel Lemire, Owen Kaser, Kamel Aouiche, Sorting improves word-aligned bitmap indexes. Data &#038; Knowledge Engineering 69 (1), pages 3-28, 2010. </p>
<p><a href="http://arxiv.org/abs/0901.3751" rel="nofollow ugc">http://arxiv.org/abs/0901.3751</a></p>
</div>
</li>
<li id="comment-54208" class="comment odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f66bb1b387e5f9a4d30c7562f83e013c?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f66bb1b387e5f9a4d30c7562f83e013c?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Lyle Kopnicky</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2011-02-11T15:31:04+00:00">February 11, 2011 at 3:31 pm</time></a> </div>
<div class="comment-content">
<p>Maybe I&rsquo;m not understanding bitmap indexes, but it seems to me that if you need 1 bit per possible value per record, it requires n^2 bits for n records when each record has a distinct value. The table itself requires only n*log(n) space to store the same values, so the bitmap index is bigger.</p>
<p>Even If you only have two possible values, male and female, then your table requires one bit per record, but your index requires two bits per record!</p>
</div>
</li>
<li id="comment-54954" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/0f96121fd8f9dd5c98f38a33c3dc7114?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/0f96121fd8f9dd5c98f38a33c3dc7114?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Kemal Erdogan</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-02-01T17:42:04+00:00">February 1, 2012 at 5:42 pm</time></a> </div>
<div class="comment-content">
<p>Hi Daniel,</p>
<p>Thank you very much for sharing your work on EWAH implementations. As far as I understand, bitmap indexes are expected to be and-ed or-ed, etc many times over. However, your implementation creates a new bitmap as the result of the operation. That would make it necessary to scan the indexes at least as many times as the number of logical predicates in a query. I was wondering whether this can be changed. Instead of returning a new bitmap you could return an EWAHIterator. And also accept and EWAHIterator as input. This would allow a single scan be done for the whole chain of logical operations. Could you please comment on this</p>
<p>Regards,<br/>
Kemal</p>
</div>
</li>
<li id="comment-54955" class="comment byuser comment-author-lemire bypostauthor odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/en/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-02-01T19:24:29+00:00">February 1, 2012 at 7:24 pm</time></a> </div>
<div class="comment-content">
<p>@Kemal Erdogan </p>
<p>Thanks. Your comment is sound and could be addressed in one of several ways.</p>
<p>I assume that you are using the Java version? If so, can you submit this either as an issue on github:</p>
<p><a href="https://github.com/lemire/javaewah" rel="nofollow ugc">https://github.com/lemire/javaewah</a></p>
<p>or on </p>
<p><a href="https://code.google.com/p/javaewah/" rel="nofollow ugc">http://code.google.com/p/javaewah/</a></p>
<p>If you are using the C++, please add this as an issue on </p>
<p><a href="https://code.google.com/p/lemurbitmapindex/" rel="nofollow ugc">http://code.google.com/p/lemurbitmapindex/</a></p>
</div>
</li>
<li id="comment-55253" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6f94632d50659f8c6993cad4da9068b8?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6f94632d50659f8c6993cad4da9068b8?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Lil</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-05-22T18:27:52+00:00">May 22, 2012 at 6:27 pm</time></a> </div>
<div class="comment-content">
<p>Hi I was trying to use your c++ implementation, but when I try to do the make I got the following error</p>
<p>headers/ewahutil.h:21:23: error: conflicting declaration â€˜typedef long unsigned int uint32_t&rsquo;<br/>
/usr/include/stdint.h:52:23: error: â€˜uint32_t&rsquo; has a previous declaration as â€˜typedef unsigned int uint32_t&rsquo;<br/>
make: *** [unit] Error 1</p>
<p>can yout tell me how to fix it.</p>
</div>
</li>
<li id="comment-55254" class="comment byuser comment-author-lemire bypostauthor odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/en/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-05-22T19:16:55+00:00">May 22, 2012 at 7:16 pm</time></a> </div>
<div class="comment-content">
<p>@Lil </p>
<p>Please report issues using either github or preferably, Google code: </p>
<p><a href="https://code.google.com/p/lemurbitmapindex/issues/list" rel="nofollow ugc">http://code.google.com/p/lemurbitmapindex/issues/list</a></p>
<p>Be sure to specify which compiler you are using.</p>
</div>
</li>
<li id="comment-55269" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f9dd9f4c2b8d081b67fe34769e24808e?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f9dd9f4c2b8d081b67fe34769e24808e?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://www.jasondavies.com/" class="url" rel="ugc external nofollow">Jason Davies</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-05-29T05:23:36+00:00">May 29, 2012 at 5:23 am</time></a> </div>
<div class="comment-content">
<p>The Oracle link seems to be broken, the correct link is: <a href="http://www.oracle.com/technetwork/articles/sharma-indexes-093638.html" rel="nofollow ugc">http://www.oracle.com/technetwork/articles/sharma-indexes-093638.html</a></p>
</div>
</li>
<li id="comment-55270" class="comment byuser comment-author-lemire bypostauthor odd alt thread-even depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn"><a href="https://lemire.me/en/" class="url" rel="ugc">Daniel Lemire</a></b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-05-29T07:27:59+00:00">May 29, 2012 at 7:27 am</time></a> </div>
<div class="comment-content">
<p>@Jason</p>
<p>Thanks for the update.</p>
</div>
</li>
<li id="comment-55293" class="comment even thread-odd thread-alt depth-1">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/6f94632d50659f8c6993cad4da9068b8?s=56&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/6f94632d50659f8c6993cad4da9068b8?s=112&#038;d=mm&#038;r=g 2x" class="avatar avatar-56 photo" height="56" width="56" loading="lazy" decoding="async" /> <b class="fn">Lil</b> <span class="says">says:</span> </div>
<div class="comment-metadata"><time datetime="2012-06-06T19:22:11+00:00">June 6, 2012 at 7:22 pm</time></a> </div>
<div class="comment-content">
<p>Hi again, I am working with C++ library, and I want to store the compress bitmap hexadecimal representation. But still I donÂ´t figured out how to do it. I was trying to use the compressed word iterator, but since I am not use to work in C++ is not very clear to me how to do it. Also I was using the method writeBuffer but does not write anything in the file, but I am not sure if I am using it correctly. Can you help me?</p>
</div>
</li>
</ol>
